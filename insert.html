<html>
<head>
<!-- Include the jQuery Library -->  
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>

<style>
.ans_inp{
		width:100%;
	}
	
</style>

<!-- My jQuery Functions -->
<script>
// quiz object will hold all the values
$quiz = {
		question_id:"", //question id
		question_text:"", // question text, in form of string
		level:"", // 1-Easy , 2-Medium , 3-Hard
		type:"", //Type 1=Single Choice, 2=Multiple Choice
		answer_text:"", // answer texts, this will be multiple arrays
		answer_options:"",  //Correct answers, array of correct answers
		answer_no:"", //No of answers
		tags:"", //Tags in form string, seperated with comma
		}

$(document).ready(function(){
		$("#Save").click(function(){
		
		prepare_object();
		
		/*$.post("CreateQuestion.php", $quiz,
		function(data,status){
			var op = JSON.stringify(data);
			if(op==1) //posted successfully
			else if(op==0) //Not posted successfully
		}); */
	}
	
$function prepare_object()
{
$quiz.question_text = $("#question").value;
$quiz.level			= $("#level").value;
$quiz.type			= $("#ans_type").value;

$answers = new Array();
$options = new Array();

$j = 0;
for($i=0;$i<no_of_ans;$i++)
	{ 
		$answers[$i] = $("#ans_txt_".$i).value; //Answers
		if( $("#ans_opt_".$i).value == true ) { $options[$j++] = $i; } // Correct Answer
	}
	
$quiz.answer_text = $answers;
$quiz.answer_options = $options;

alert(json_stringify($quiz));
}	

</script>
	
<script type="text/javascript">	
// Global Variables
var ans_type=1; //Defaulted to 1
var no_of_ans=2; //No of Answers, defaulted to 2 (Minimum number)
var ans_content="";

function answer_type(type)
{

if(type == 0) return;
ans_type=type;
no_of_ans=2;
ans_content="";
populate_answers(ans_type,no_of_ans);
}

function add_answer()
{
no_of_ans = no_of_ans - 0 + 1;
	if(ans_type==1) inp_type="radio";
	else if(ans_type == 2) inp_type="checkbox";
ans_content += "<tr><td>"+no_of_ans+". <input type='"+inp_type+"' name='answers' id='ans_opt_"+no_of_ans+"' /></td> <td><input type='text' id='ans_txt_"+no_of_ans+"' class='ans_inp'/></td></tr>";
populate_answers(ans_type,no_of_ans);
}

function populate_answers(type,no)
{
	var content_obj = document.getElementById("answers_span");
	var inp_type;
	
	if(type==1) inp_type="radio";
	else if(type == 2) inp_type="checkbox";
	
	if(ans_content == "") //first time
	{
		ans_content += "<tr><td>1. <input type='"+inp_type+"' name='answers' id='ans_opt_1' /></td> <td><input type='text' id='ans_txt_1' class='ans_inp' /></td></tr>";
		ans_content += "<tr><td>2. <input type='"+inp_type+"' name='answers' id='ans_opt_2' /></td> <td><input type='text' id='ans_txt_2' class='ans_inp' /></td></tr>";
	}
		
	//alert(ans_content);
	content_obj.innerHTML = "<table>"+ans_content+"</table>";
}

</script>

<body>

<p>

<table cellpadding="10" >
	<tr>
		<td>Question</td><td><textarea id="question" style="border:none; border-style:dotted; border-width:1px; width:300px; height:150px;" value=""></textarea></td>
	</tr>
	
	<tr>
		<td>Tags (Seperated by comma)</td><td><input type="text" id="tags" class="ans_inp" /><td>
	</tr>
	
	<tr>
		<td>Level</td><td> <select id="level">  <option value="1">1 - Easy</option> <option value="2">2 - Medium</option> <option value="3">3 - Hard</option> </select></td>
	</tr>
	
	<tr>
		<td>Answer Type</td><td> <select id="ans_type" onChange="answer_type(this.value);"> <option value="0" selected>-- select --</option> <option value="1">1 - Single Choice</option> <option value="2">2 - Multiple Choice</option></select></td>
	</tr>
	
	<tr>
		<td>Answers</td><td><span id="answers_span"></span></td><td><input type="button" value="Add" onClick="add_answer();"/></td>
	</tr>
	
	<tr>
		<td><button id="Save">Save</button></td>
	</tr>
	
</table>
</p>

</body>
	
</head>
</html>